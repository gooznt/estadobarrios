<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Estado de Caminos - Dashboard</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .barrio { padding: 10px; border-bottom: 1px solid #ccc; display: flex; justify-content: center; }
    .estado { width: 20px; height: 20px; border-radius: 50%; }
    .verde { background-color: green; }
    .amarillo { background-color: yellow; }
    .rojo { background-color: red; }
  </style>
</head>
<body>
  <h1>Estado de caminos</h1>
  <div id="listado"></div>

  <script>
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR3yBU_w_jwit366xsBsWqFUHsL99QS7qkBwyj4atg7q2EJSigcbb2LzEUv90ylAvpWL8dywD9GxW14/pubhtml?gid=0&single=true';

    fetch(sheetUrl)
      .then(res => res.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');

        const rows = doc.querySelectorAll('table tbody tr');
        const container = document.getElementById('listado');

        rows.forEach((row, index) => {
          if (index === 0) return; // Saltear encabezado
          const celdas = row.querySelectorAll('td');
          const barrio = celdas[0]?.innerText.trim();
          const estado = celdas[1]?.innerText.trim();
          const cuerpo = celdas[2]?.innerText.trim();
          const fecha = celdas[3]?.innerText.trim();

          let claseColor = '';
          if (estado.toLowerCase().includes('ok')) claseColor = 'verde';
          else if (estado.toLowerCase().includes('deshabilitado')) claseColor = 'rojo';
          else claseColor = 'amarillo';

          const header = document.createElement('div');
          header.className = 'barrio';
          header.innerHTML = `
            <span>Barrio</span>
            </nbsp></nbsp><span>Fecha de actualizacion</span>
            </nbsp></nbsp><span>Estado del acceso</span>
          `;
          container.appendChild(item);

          const item = document.createElement('div');
          item.className = 'barrio';
          item.innerHTML = `
            <span>${barrio}</span>
            </nbsp></nbsp><span>${fecha}</span>
            </nbsp></nbsp><span class="estado ${claseColor}"></span>
          `;
          container.appendChild(item);
        });
      });
  </script>
</body>
</html>
